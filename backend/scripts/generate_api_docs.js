    // Simple script to generate API documentation for endpoints
// You can customize this to parse your routes and output more details

const fs = require('fs');
const path = require('path');

const outputPath = path.resolve(__dirname, '../../docs/API.md');

const docContent = `# API Endpoints\n\nEste archivo es generado automáticamente.\n\n## Puntos de Control\n- GET /puntos-control: Listar todos los puntos de control\n- POST /puntos-control: Crear un nuevo punto de control\n- PUT /puntos-control/:id: Actualizar punto de control\n- DELETE /puntos-control/:id: Eliminar punto de control\n- GET /puntos-control/:id/asignaciones: Visualizar asignaciones activas por punto\n\n## Asignaciones\n- GET /asignaciones: Listar todas las asignaciones\n- POST /asignaciones: Crear asignación múltiple de guardias a puntos\n- PUT /asignaciones/:id/finalizar: Finalizar (desasignar) una asignación\n\n## Usuarios\n- GET /usuarios: Listar usuarios (sin contraseñas)\n- POST /usuarios: Crear usuario con contraseña encriptada\n- PUT /usuarios/:id/password: Cambiar contraseña\n- PUT /usuarios/:id: Actualizar usuario\n- GET /usuarios/:id: Obtener usuario por ID\n\n## Autenticación\n- POST /login: Login seguro\n\n## Alumnos\n- GET /alumnos/:codigo: Buscar alumno por código universitario\n- GET /alumnos: Listar todos los alumnos\n\n## Externos\n- GET /externos/:dni: Buscar externo por DNI\n- GET /externos: Listar todos los externos\n\n## Asistencias\n- GET /asistencias: Listar asistencias\n- POST /asistencias: Registrar nueva asistencia (procesamiento encolado)\n- POST /asistencias/completa: Registrar asistencia completa\n- GET /asistencias/ultimo-acceso/:dni: Determinar último tipo de acceso\n\n## Decisiones Manuales\n- POST /decisiones-manuales: Registrar decisión manual del guardia\n- GET /decisiones-manuales/guardia/:guardiaId: Obtener decisiones de un guardia específico\n- GET /decisiones-manuales: Obtener todas las decisiones manuales\n\n## Presencia\n- GET /presencia: Obtener presencia actual en el campus\n- POST /presencia/actualizar: Actualizar presencia de un estudiante\n- GET /presencia/historial: Historial completo de presencia\n- GET /presencia/largo-tiempo: Personas con mucho tiempo en campus\n\n## Sesiones Guardias\n- POST /sesiones/iniciar: Iniciar sesión de guardia\n- POST /sesiones/heartbeat: Mantener sesión activa\n- POST /sesiones/finalizar: Finalizar sesión\n- GET /sesiones/activas: Obtener sesiones activas\n- POST /sesiones/forzar-finalizacion: Forzar finalización de sesión (admin)\n\n## Visitas\n- POST /visitas: Registrar nueva visita\n- GET /visitas: Listar todas las visitas\n\n## Sincronización y Backup\n- GET /sync/changes/:timestamp: Obtener cambios desde timestamp\n- POST /sync/upload: Recibir cambios del cliente\n- POST /backup/create: Backup automático de datos\n\n## Reportes\n- GET /reportes/asistencias: Reporte de asistencias por rango de fechas\n- GET /reportes/guardias: Reporte de actividad de guardias\n\n## Machine Learning (ML)\n- GET /ml/dataset/validate: Validar disponibilidad de dataset\n- POST /ml/dataset/collect: Recopilar dataset histórico\n- GET /ml/dataset/statistics: Obtener estadísticas del dataset\n- POST /ml/pipeline/train: Ejecutar pipeline completo de entrenamiento\n- GET /ml/models: Obtener modelos entrenados disponibles\n- POST /ml/models/predict: Hacer predicción con modelo entrenado\n- GET /ml/reports/peak-hours: Generar reporte de horarios pico con ML\n- GET /ml/reports/comparison: Comparación ML vs Real\n- GET /ml/reports/hourly-metrics: Métricas de precisión por horario\n- GET /ml/reports/suggestions: Sugerencias de ajuste\n- GET /ml/reports/dashboard-summary: Resumen para dashboard\n- GET /ml/dashboard: Dashboard completo de monitoreo ML\n- GET /ml/dashboard/summary: Resumen rápido del dashboard\n- GET /ml/metrics/current: Métricas actuales\n- GET /ml/metrics/evolution: Evolución temporal de métricas\n- GET /ml/metrics/evolution/multiple: Evolución de múltiples métricas\n- GET /ml/metrics/history: Historial completo de métricas\n- GET /ml/metrics/latest: Última métrica guardada\n- GET /ml/metrics/compare-history: Comparar métricas actuales con históricas\n- GET /ml/dashboard/alerts: Obtener alertas del modelo\n- GET /ml/dashboard/recommendations: Obtener recomendaciones\n- GET /ml/visualization/data: Datos para gráficos de visualización\n- GET /ml/visualization/line-chart: Datos para gráfico de líneas\n- GET /ml/visualization/bar-chart: Datos para gráfico de barras\n- GET /ml/visualization/confidence-intervals: Datos con intervalos de confianza\n- POST /ml/auto-update/configure: Configurar actualización automática\n- GET /ml/auto-update/config: Obtener configuración de actualización automática\n- GET /ml/auto-update/check: Verificar datos nuevos para actualización\n- POST /ml/auto-update/execute: Ejecutar verificación y actualización automática\n- POST /ml/auto-update/schedule: Programar actualización automática\n- GET /ml/auto-update/statistics: Obtener estadísticas de actualizaciones\n- POST /ml/auto-update/manual: Ejecutar actualización manual\n- POST /ml/etl/pipeline: Ejecutar pipeline ETL completo para ML\n- POST /ml/etl/basic: Ejecutar ETL básico\n- POST /ml/etl/clean: Limpiar datos existentes\n- POST /ml/etl/validate: Validar calidad de datos\n- GET /ml/etl/statistics: Obtener estadísticas del dataset\n- GET /ml/etl/structure: Obtener estructura ML definida\n- POST /ml/etl/validate-structure: Validar estructura de datos\n- POST /ml/etl/quality-report: Generar reporte de calidad\n- POST /ml/regression/train: Entrenar modelo de regresión lineal\n- GET /ml/regression/metrics: Obtener métricas del modelo de regresión\n- POST /ml/regression/predict: Predicción con modelo de regresión\n- POST /ml/regression/cross-validate: Validación cruzada\n- POST /ml/regression/optimize: Optimizar parámetros del modelo\n- POST /ml/regression/evaluate: Evaluar modelo con conjunto de prueba\n- POST /ml/prediction/peak-hours/train: Entrenar modelo predictivo de horarios pico\n- GET /ml/prediction/peak-hours/next-24h: Predecir horarios pico próximas 24h\n- GET /ml/prediction/peak-hours/metrics: Métricas del modelo predictivo\n- POST /ml/prediction/peak-hours/validate: Validar precisión del modelo\n- GET /ml/prediction/peak-hours/date: Predecir horarios pico para fecha específica\n- GET /ml/prediction/peak-hours/summary: Resumen de predicción para dashboard\n\n## Actualización Automática Semanal\n- POST /ml/update/schedule: Configurar job automático semanal\n- GET /ml/update/schedule/status: Obtener estado del scheduler\n- POST /ml/update/schedule/stop: Detener scheduler\n- POST /ml/update/weekly: Ejecutar actualización semanal manualmente\n- GET /ml/update/history: Historial de actualizaciones\n- GET /ml/update/drift: Monitorear drift del modelo\n- POST /ml/update/validate-performance: Validar performance del modelo actualizado\n- GET /ml/update/config: Obtener configuración de actualización\n\n## Salud y Dashboard\n- GET /health: Endpoint de salud del sistema\n- GET /dashboard/metrics: Métricas del dashboard\n- GET /dashboard/recent-access: Accesos recientes\n\n`;

fs.writeFileSync(outputPath, docContent);
console.log('API.md generado en docs/API.md');
